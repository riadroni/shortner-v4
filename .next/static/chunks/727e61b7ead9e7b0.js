(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,r)=>{t.exports=e.r(76562)},53501,e=>{"use strict";var t=e.i(43476),r=e.i(18566),s=e.i(71645);function l({initialUsername:e}){let l=(0,r.useRouter)(),[a,o]=(0,s.useState)(e??"");(0,s.useEffect)(()=>{if(!a&&"undefined"!=typeof document){let e=document.cookie.match(/(?:^|;\s*)username=([^;]+)/);e&&o(decodeURIComponent(e[1]))}},[a]);let i=async()=>{try{await fetch("/api/logout",{method:"POST"})}catch(e){console.error(e)}finally{l.push("/login")}};return(0,t.jsxs)("header",{className:"mb-8 flex items-center justify-between rounded-lg shadow-md p-4 bg-gradient-to-l from-blue-600 via-purple-600 to-pink-600 text-white animate-fade-in",children:[(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row items-center space-x-2 text-xl md:text-2xl tracking-tight font-bold ",children:[(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 015.657 0l1.414 1.415a4 4 0 010 5.657l-3.182 3.182a4 4 0 01-5.657 0l-.708-.708"}),(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.172 13.828a4 4 0 01-5.657 0l-1.415-1.415a4 4 0 010-5.657l3.182-3.182a4 4 0 015.657 0l.708.708"})]}),(0,t.jsx)("span",{children:"Nobita Shortener"})]}),(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center items-end gap-4",children:[a&&(0,t.jsxs)("span",{className:"flex items-center text-sm md:text-base font-medium",children:[(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5.121 17.804A9 9 0 0112 15a9 9 0 016.879 2.804M15 11a3 3 0 11-6 0 3 3 0 016 0z"})}),a]}),a&&(0,t.jsxs)("button",{onClick:i,className:"flex items-center bg-white/20 hover:bg-red-600 text-white px-3 py-1 md:px-4 md:py-2 rounded transition-colors duration-300",children:[(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 11-6 0V7a3 3 0 016 0v1"})}),"Logout"]})]})]})}e.s(["default",()=>l])},57981,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(74080);function l({onClose:e,onCreated:l}){let[a,o]=(0,r.useState)(""),[i,n]=(0,r.useState)(null),[d,c]=(0,r.useState)(""),[u,m]=(0,r.useState)(""),[x,p]=(0,r.useState)(""),[h,f]=(0,r.useState)(!1),g=(0,r.useRef)(null);async function b(t){if(t.preventDefault(),p(""),!a.trim()||!d.trim())return void p("Custom ID and Mobile URL are required.");if(!i)return void p("Please choose an image (GIF/PNG/JPG).");try{let t=new FormData;t.append("id",a.trim()),t.append("image",i),t.append("urlMobile",d.trim()),t.append("urlDesktop",u.trim());let r=await fetch("/api/create",{method:"POST",body:t});if(r.ok)await r.json(),l(),o(""),n(null),c(""),m(""),g.current&&(g.current.value=""),e();else{let e=await r.json().catch(()=>({}));p(e.error||"Failed to create link")}}catch(e){console.error(e),p("An unexpected error occurred.")}}(0,r.useEffect)(()=>{f(!0);let t=document.body.style.overflow;document.body.style.overflow="hidden";let r=t=>{"Escape"===t.key&&e()};return document.addEventListener("keydown",r),()=>{document.body.style.overflow=t,document.removeEventListener("keydown",r)}},[e]);let w=(0,t.jsx)("div",{className:"fixed inset-0 z-[9999] bg-black/50",role:"dialog","aria-modal":"true",onClick:e,children:(0,t.jsx)("div",{className:"flex lg:h-screen w-screen items-center justify-center p-4",onClick:e=>e.stopPropagation(),children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-2xl w-full max-w-md animate-fade-in mt-20 lg:mt-0",children:[(0,t.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 px-6 py-4 flex justify-between items-center rounded-t-lg",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-white",children:"Add Link"}),(0,t.jsx)("button",{onClick:e,className:"text-white/90 hover:text-white transition","aria-label":"Close modal",children:"✕"})]}),(0,t.jsxs)("form",{onSubmit:b,className:"px-6 py-4 space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"id",className:"block text-sm font-medium text-gray-700 mb-1",children:"Image Name"}),(0,t.jsx)("input",{type:"text",id:"id",value:a,onChange:e=>o(e.target.value),placeholder:"Enter custom ID",className:"block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Upload Image"}),(0,t.jsx)("input",{type:"file",accept:"image/gif,image/png,image/jpeg",onChange:e=>{let t=e.target.files;t&&t[0]&&n(t[0])},ref:g,className:"block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"urlMobile",className:"block text-sm font-medium text-gray-700 mb-1",children:"Facebook URL"}),(0,t.jsx)("input",{type:"url",id:"urlMobile",value:d,onChange:e=>c(e.target.value),placeholder:"https://example.com/mobile",className:"block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"urlDesktop",className:"block text-sm font-medium text-gray-700 mb-1",children:"Other URL (optional)"}),(0,t.jsx)("input",{type:"url",id:"urlDesktop",value:u,onChange:e=>m(e.target.value),placeholder:"https://example.com/desktop",className:"block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),x&&(0,t.jsx)("div",{className:"text-red-600 text-sm",children:x}),(0,t.jsxs)("div",{className:"flex items-center justify-between pt-2",children:[(0,t.jsx)("button",{type:"submit",className:"bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 hover:opacity-90 text-white px-4 py-2 rounded-md shadow transition-opacity duration-200",children:"Submit"}),(0,t.jsx)("button",{type:"button",onClick:e,className:"bg-gray-200 hover:bg-gray-300 text-gray-700 px-4 py-2 rounded-md",children:"Close"})]})]})]})})});return h?(0,s.createPortal)(w,document.body):null}function a({onCreated:e}){let[s,a]=(0,r.useState)(!1);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>a(!0),className:"bg-gradient-to-tr from-blue-600 via-purple-600 to-pink-600 hover:opacity-90 text-white px-4 py-2 rounded-md shadow transition-opacity duration-200",children:"Add URL"}),s&&(0,t.jsx)(l,{onClose:()=>a(!1),onCreated:()=>{e()}})]})}function o({initialLinks:e}){let[s,l]=(0,r.useState)(e),[o,i]=(0,r.useState)(""),[n,d]=(0,r.useState)("");(0,r.useEffect)(()=>{d(window.location.origin)},[]);let c=async()=>{try{let e=await fetch("/api/links");if(e.ok){let t=await e.json(),r=Object.values(t);l(r)}else 401===e.status&&(window.location.href="/login")}catch(e){console.error(e)}},u=s.filter(e=>e.id.toLowerCase().includes(o.toLowerCase()));return(0,t.jsx)("div",{className:"space-y-6 animate-fade-in",children:(0,t.jsxs)("div",{className:"bg-white/80 backdrop-blur-md p-6 rounded-lg shadow-2xl border border-gray-200",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold tracking-tighter  text-gray-800 border-l-4 border-blue-600 pl-3",children:"Your Links"}),(0,t.jsx)(a,{onCreated:()=>{c()}})]}),(0,t.jsx)("div",{className:"flex justify-end mb-4",children:(0,t.jsx)("input",{type:"text",placeholder:"Search Image",value:o,onChange:e=>i(e.target.value),className:"border border-gray-300 rounded px-3 py-2 w-full max-w-xs focus:outline-none focus:ring-2 focus:ring-purple-500 bg-white shadow-sm"})}),(0,t.jsx)("div",{className:"overflow-x-auto rounded-lg shadow-lg",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,t.jsx)("thead",{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 text-white",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider",children:"#"}),(0,t.jsx)("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider",children:"Image Name"}),(0,t.jsx)("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider",children:"Mobile Url"}),(0,t.jsx)("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider",children:"Desktop Url"}),(0,t.jsx)("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider",children:"Short Url"}),(0,t.jsx)("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider",children:"Actions"})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===u.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:6,className:"px-4 py-4 text-center text-gray-500",children:"No entries found."})}):u.map((e,r)=>(0,t.jsxs)("tr",{className:"hover:bg-gray-50 odd:bg-gray-50 even:bg-white transition-colors",children:[(0,t.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-700",children:r+1}),(0,t.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900",children:e.id}),(0,t.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-blue-700",children:(0,t.jsx)("a",{href:e.urlMobile,className:"underline",target:"_blank",rel:"noreferrer",children:e.urlMobile})}),(0,t.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-blue-700",children:e.urlDesktop?(0,t.jsx)("a",{href:e.urlDesktop,className:"underline",target:"_blank",rel:"noreferrer",children:e.urlDesktop}):(0,t.jsx)("span",{className:"text-gray-400 italic",children:"—"})}),(0,t.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-blue-700",children:(0,t.jsx)("a",{href:`/${e.id}`,className:"underline",target:"_blank",rel:"noreferrer",children:n?`${n}/${e.id}`:`/${e.id}`})}),(0,t.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-red-600",children:(0,t.jsx)("button",{onClick:async()=>{if(window.confirm(`Delete entry ${e.id}?`))try{(await fetch(`/api/delete/${e.id}`,{method:"DELETE"})).ok?(l(t=>t.filter(t=>t.id!==e.id)),await c()):console.error("Failed to delete")}catch(e){console.error(e)}},className:"underline hover:text-red-700 transition-colors duration-200",children:"Delete"})})]},e.id))})]})})]})})}e.s(["default",()=>o],57981)}]);